# es中有一亿条数据怎么优化

## 加大filesystem cache内存的大小

## 添加关键字时尽量不要添加不搜索的字段，海量数据存储搭配HBase


## 数据预热
数据总量大于filesystem cache容量时，用自定义的程序把热点数据访问一遍，让它进入filesystem cache

## 冷热分离
冷数据和热数据分开机器存储，还是为了让热点数据都存在于filesystem cache中，避免被冷数据刷掉


## 设计时尽量避免复杂操作
join等关联在外部处理好再扔进es

## 分页优化
每页十条，查询第100页，如果有5个shared，会从每个shared获取1000条数据，在协调节点上最后处理完再返回。越往后翻，越慢。

解决方法：

不允许深度分页

使用 scroll api 实现微博一直往下刷的形式
    